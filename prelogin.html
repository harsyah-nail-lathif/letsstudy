<head>
  <style>
    #buttonlogin{
      height: 65px; width: 160px;
      border-radius: 20px;
      background: #95CD41;
      border: none;
      color: white;
      font-size: 16px;
    }

    #buttonregister{
      height: 65px; width: 160px;
      border-radius: 20px;
      background: #95CD41;
      border: none;
      color: white;
      font-size: 16px;
    }

    #buttonprelogin{
      height: 65px; width: 160px;
      border-radius: 20px;
      background: #95CD41;
      border: none;
      color: white;
      font-size: 16px;
    }

    input[type=text], [type=password], [type=email]{
      height: 10%; width: 75%;
      margin-bottom: 20px;
      padding-left: 10px;
      
    }

    #tittle{
      height: 10%; width: 100%;
      background: gray;
      display: flex;
      align-items: center;
      align-content: center;
      justify-content: center;
    }

    #loginbutton{
      width: 50%; height: 10%;
      background: white;
      border: none;
      border-bottom: solid 1px gray;
      font-size: 23px;
      float: left;
    }

    #signupbutton{
      width: 50%; height: 10%;
      background: white;
      border: none;
      border-bottom: solid 1px gray;
      font-size: 23px;
      float: left;
    }

    #preloginbutton{
      justify-content: center;
      width: 90px; height: 50px;
      background: #95CD41;
      border: none;
      border-radius: 20px;
      font-size: 16px;
      color: whitesmoke;
      float: left;
    }

    #loginsec { 
      transition: .3s;
      justify-content: center;
      align-content: center;
      align-items: center;
      display: flex;
      flex-direction: column;
      position: absolute;
      top: 0px; left: 0px;
      width: 100%; height: 100%;
      background: white;
    }

    #signupsec {
      transition: .3s;
      justify-content: center;
      align-content: center;
      align-items: center;
      display: flex;
      flex-direction: column;
      position: absolute;
      top: 0%; left: 100%;
      width: 100%; height: 100%;
      background: white;
    }

    #placeholder {
      display: flex;
      flex-direction: row;
      overflow: hidden;
      position: absolute;
      top: 20%; left: 0%;
      width: 100%; height: 80%
    }

    #loginbox {
      position: absolute;
      top: 5%; left: 60%;
      width: 450px; height: 600px;
      z-index: 10;
      background: white;
      /* display: none; */
      /* border: solid 5px black; */
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0px 5px 15px gray;
    }

    #itemprelogin{
      top: 0px; left: 0px;
      width: 100%; height: 100%;
      float: left;
      background: white;
    }

    #image{
      position: absolute;
      top: 15%; left: 3%;
    }

    #text{
      border: none;
      font-size: 24px;
    }
  </style>
</head>
<img id="image" src="pict/pngpict.jpg">
<div id="loginbox">
    <div id="tittle">let's study</div>
    <button id="loginbutton" onclick="reverseslide()">login</button>
    <button id="signupbutton" onclick="slide()">signup</button>

    <div id="placeholder">
      <div id="loginsec">
      <input id="username" type="text" name="email" placeholder="email">
      <input id="password" type="password" name="password"  placeholder="password">
      <button id="buttonlogin" value="login"> Login </button>
    </div> 
    <div id="signupsec">
      <input id="email" type="email" name="email" placeholder="Email">
      <input id="username" type="text" name="username" placeholder="username">
      <input id="password" type="password" name="password" placeholder="password">
      <input id="conpassword" type="password" name="conpassword" placeholder="Confirm Password">

      <input type="submit" id="buttonregister" name="register" value="sign me up">
      <!-- <button id="buttonregister" value="register"> SignUp </button> -->
    </div>
  </div>
</div>

<!-- the end of login section -->
<!-- <script src="/socket.io/socket.io.js"></script> -->
<script src="firebaselogin.js"></script>

  <!-- <script>
    // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
import { getAuth, createUserWithEmailAndPassword } from "firebase/auth";

// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBGDdKAsyvyeaDe7_5ypBzwB11dK-iumCs",
  authDomain: "letsstudy-b50fb.firebaseapp.com",
  projectId: "letsstudy-b50fb",
  storageBucket: "letsstudy-b50fb.appspot.com",
  messagingSenderId: "84562109475",
  appId: "1:84562109475:web:6b8b2193eedaaef67dbd96",
  measurementId: "G-MED1YHK3P0"
};

// Initialize Firebase
const auth = getAuth();
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

signup.addEventListener('click',(e)=>{

  var usernameS = document.getElementById("usernameS".valueOf);
  var emailS = document.getElementById("emailS".valueOf);
  // var passwordS = document.getElementById("passwordS").value;
  // var conpasswordS = document.getElementById("conpassword").value;

  createUserWithEmailAndPassword(auth, emailS, passwordS, conpasswordS, usernameS)
  .then((userCredential) => {
    // Signed in 
    const user = userCredential.user;
    alert("User Created")
    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    // ..

    alert(errorMessage);
  });

})

  </script> -->
  <!-- <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import { getdatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";
    import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyBGDdKAsyvyeaDe7_5ypBzwB11dK-iumCs",
      authDomain: "letsstudy-b50fb.firebaseapp.com",
      databaseURL: "https://letsstudy-b50fb-default-rtdb.firebaseio.com",
      projectId: "letsstudy-b50fb",
      storageBucket: "letsstudy-b50fb.appspot.com",
      messagingSenderId: "84562109475",
      appId: "1:84562109475:web:c32ea458aee6cce97dbd96",
      measurementId: "G-58Z4Y0EKL1"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getdatabase(app);
    const auth = getAuth(app)

    buttonregister.addEventListener('click', (e) =>{

      var email = document.getElementById('email').value;
      var username = document.getElementById('username').value;
      var password = document.getElementById('password').value;

      createUserWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    // Signed in
    const user = userCredential.user;
    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    
    alert(errorMessage);
    // ..
  });
  
});
  </script> -->
  
  <script type="module">
    
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-app.js";
    import { getDatabase, set, ref, update } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-database.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-auth.js";
 
    const firebaseConfig = {
    apiKey: "AIzaSyCS35eJjz8AgFy2A2Z4GG6OgFRw2O81bT4",
    authDomain: "letsstudy-57c49.firebaseapp.com",
    databaseURL: "https://letsstudy-57c49-default-rtdb.firebaseio.com",
    projectId: "letsstudy-57c49",
    storageBucket: "letsstudy-57c49.appspot.com",
    messagingSenderId: "944590542478",
    appId: "1:944590542478:web:8d37d0650fc7212cb19bdf",
    measurementId: "G-K76EDNXGW2"
  };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const auth = getAuth();
  
    buttonregister.addEventListener('click',(e) => {
  
    var email = document.getElementById('email').value;
    var password = document.getElementById('password').value;
    var username = document.getElementById('username').value;
  
    createUserWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
       // Signed in 
        const user = userCredential.user;
  
        set(ref(database, 'users/' + user.uid),{
            username: username,
            email: email
        })
  
        alert('user created!');
        // ...
      })
      .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;
  
        alert(errorMessage);
      // ..
      });
  
  });
  
  buttonlogin.addEventListener('click',(e)=>{
     var email = document.getElementById('email').value;
     var password = document.getElementById('password').value;
  
        signInWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          // Signed in 
          const user = userCredential.user;
  
          const dt = new Date();
           update(ref(database, 'users/' + user.uid),{
            last_login: dt,
          })
  
           alert('User loged in!');
          // ...
        })
        .catch((error) => {
          const errorCode = error.code;
          const errorMessage = error.message;
  
          alert(errorMessage);
    });
  
   });
  
  const user = auth.currentUser;
  onAuthStateChanged(auth, (user) => {
    if (user) {
      // User is signed in, see docs for a list of available properties
      // https://firebase.google.com/docs/reference/js/firebase.User
      const uid = user.uid;
      //bla bla bla
      // ...
    } else {
      // User is signed out
      // ...
      //bla bla bla
    }
  });
  
  // logout.addEventListener('click',(e)=>{
  
  //    signOut(auth).then(() => {
  //      // Sign-out successful.
  //      alert('user loged out');
  //    }).catch((error) => {
  //      // An error happened.
  //      const errorCode = error.code;
  //      const errorMessage = error.message;
  
  //         alert(errorMessage);
  //    });
  
  // });
  
  </script>