<!DOCTYPE html>
<html lang="en">

<head>
    <!--link link to css and js-->

    <link href="../vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="../vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="../vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <!--import css-->
    <link rel="stylesheet" href="../Profile/profile.css">

    <!--cdn bootstrap 5 -->
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <!--the end of cdn bootstrap5-->

    <!-- aos cdn -->
    <link href="../vendor/aos/aos.css" rel="stylesheet">
    <!-- the end of cdn aos -->

    <!--cdn Jquery-->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
    </script>
    <!--the end of cdn Jquery-->
    <!--the end of link link to css and js-->

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>homework</title>

</head>

<body>
    <header id="header" class="header fixed-top">
        <div class="container-fluid container-xl d-flex align-items-center justify-content-between">
            <a href="index.html" class="logo d-flex align-items-center">
                <span>LetsStudy</span>
            </a>
            <nav id="navbar" class="navbar">
                <ul>
                    <li><a class="nav-link scrollto" href="/Home/Home.html">Home</a></li>
                    <li><a class="nav-link scrollto" href="/Statistik/statistik.html">Statistik</a></li>
                    <li><a class="nav-link scrollto active">Home Work</a></li>
                    <li><a class="nav-link scrollto" href="/Profile/profile.html">Profile</a></li>
                </ul>
                <i class="bi bi-list mobile-nav-toggle"></i>
            </nav>
            <!--navbar -->
        </div>
    </header>

    <main>
        <!--section 1-->
        <section id="hero" class="hero d-flex align-items-center">
            <div class="container">
                <div>
                    <div class="row">
                        <div class="col-xl col-md text-center">
                            <div>
                                <label> image name</label> <input type="text" id="namebox"> <label id="extlab"></label> <br><br>
                                <img style="height: 300px; width: 300px;"
                                    id="myimg" class="img-radius"
                                    alt="User-Profile-Image">
                            </div>
                            <p class="h6">Hembo Tingor</p>
                            <p>Web Designer</p>
                            <button id="selbtn"> select image</button>
                     <button id="upbtn"> upload btn</button>
                    <button id="downbtn"> download btn</button>
                        </div>

                        <div id="information" class="col-xl-6">
                            <h3>Information</h3>
                            <h4 class="email">Email</h4>
                            <p>mtng@gmail.com</p>
                            <h4>Nomor Telphone</h4>
                            <p>0812384765</p>
                            <h4>Projects Recents</h4>
                            <p>Sam Disuja</p>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            <!-- Update -->
        </section>
    </main>
    <!-- back to top -->
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
            class="bi bi-arrow-up-short"></i></a>
    <!-- end of back to top -->

    <!-- footer  -->
    <footer class="fixed-bottom p-5 bg-light">
        <span class="text-muted">&copy; 2020 LetsStudy</span>
    </footer>
    <!-- end of footer -->

    <script src="/vendor/purecounter/purecounter.js"></script>
    <script src="/vendor/aos/aos.js"></script>
    <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="/vendor/php-email-form/validate.js"></script>
    <script src="../Profile/profile.js"></script>
    
    <script>

var files = [];
var reader = new FileReader();

var namebox = document.getElementById('namebox')
var extlab = document.getElementById('extlab')
var myimag = document.getElementById('myimag')
var upprogress = document.getElementById('upprogress')
var selbtn = document.getElementById('selbtn')
var upbtn = document.getElementById('upbtn')
var downbtn = document.getElementById('downbtn')

        var input = document.createElement('input');
input.type = 'file';

input.onchange = e =>{
    files = e.target.files;

    var extension = GetFileExt(files[0]);
    var name = GetFileName(files[0]);

    namebox.value = name;
    extlab.innerHTML = extension;

    reader.readAsDataURL(files[0]);
}

reader.onload = function(){
    myimag.src = reader.result; 
}


// selection //

selbtn.onclick = function(){
    input.click();
}

function GetFileExt(file){
    var temp = file.name.split('.');
    var ext = temp.slice((temp.length-1), (temp.length));
    return '.' + ext[0];
}

function GetFileName(file){
    var temp = file.name.split('.');
    var fname = temp.slice(0,-1).join('.');
    return fname;
}

// upload //

async function UploadProcess(){
    var ImgToUpload = files[0];

    var ImgName = namebox.value + extlab.innerHTML;

    const metaData ={
        contentType: ImgToUpload.type
    }

    const storage = getStorage();

    const storageRef = sRef(storage, "Images," + ImgName);
    
    const uploadaTask = uploadBytesResumable(storageRef, ImgToUpload, metaData);

    uploadaTask.on('state-change', (snapshot) =>{
        var progress = (snapshot.bytesTransferred / snapshot.totalByte) * 100;
        programlab.innerHTML = "upload" + progress + "%"
    },
    
    (error)=>{
        alert("error: image not uploaded");        
    },

    ()=>{
        getDownloadURL(uploadaTask.snapshot.ref).then((downloadURL)=>{
            console.log(downloadURL);
        });
    }
    );
}

    </script>
</body>

</html>